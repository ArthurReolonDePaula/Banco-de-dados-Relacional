CREATE DATABASE REDE_SOCIAL;
USE REDE_SOCIAL;

CREATE TABLE USUARIO(
	ID INT NOT NULL,
    NOME VARCHAR(70) NOT NULL,
    IDADE INT NOT NULL,
    EMAIL VARCHAR(100),
    SENHA VARCHAR(20),
    
PRIMARY KEY(ID)
);

INSERT INTO USUARIO(ID, NOME, IDADE, EMAIL, SENHA)
	VALUES(1, 'Arthur' , 20 , 'arthurreolon@gmail.com', 111111),
    (2, 'João Pedro' , 17 , 'joaopedro@gmail.com', 222222),
    (3, 'Nathalia' , 19 , 'nathalia@gmail.com', 333333),
    (4, 'Pedro' , 35 , 'pedro@gmail.com', 444444);
    
CREATE TABLE REACAO(
	ID INT NOT NULL UNIQUE KEY,
	DESCRICAO_REACAO VARCHAR(20) NOT NULL,
    
PRIMARY KEY(ID)
);

INSERT INTO REACAO(ID, DESCRICAO_REACAO)
	VALUES(1, 'GOSTEI'),(2, 'NÃO GOSTEI');


/**CREATE TABLE REACAO_USUARIO(
	ID_RELACAO_REACAO_USUARIO INT NOT NULL,
	ID_USUARIO INT NOT NULL,
	ID_REACAO INT NOT NULL,
    
FOREIGN KEY (ID_REACAO) REFERENCES REACAO (ID),
FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID)
);

INSERT INTO REACAO_USUARIO(ID_RELACAO_REACAO_USUARIO, ID_USUARIO, ID_REACAO)
	VALUES (1,1,1),(2,1,2),(3,2,1),(4,2,2),(5,3,1),(6,3,2),(7,4,1),(8,4,2);
**/

CREATE TABLE POSTAGEM(
	ID INT NOT NULL,
	ID_USUARIO INT NOT NULL,
    CONTEUDO VARCHAR (140) NOT NULL,
    DATA_PUBLICACAO DATE NOT NULL,
    HORA_PUBLICACAO TIME NOT NULL,

PRIMARY KEY(ID),
FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO (ID)
);

INSERT INTO POSTAGEM(ID, ID_USUARIO, CONTEUDO, DATA_PUBLICACAO, HORA_PUBLICACAO)
	VALUES (1, 1, 'Meu nome é Arthur', '2017/09/01' , '8:00:00'),
    (2, 2, 'Meu nome é Joao Pedro', '2017/09/02' , '9:00:00'),
    (3, 3, 'Meu nome é Nathalia', '2017/09/02' , '11:00:00'),
    (4, 4, 'Meu nome é Pedro', '2017/09/03' , '9:00:00'),
    (5, 1, 'Está chovendo', '2017/09/03' , '15:00:00');

CREATE TABLE POSTAGEM_USUARIO_REACAO(
	ID_POSTAGEM INT NOT NULL,
	ID_USUARIO INT NOT NULL,
    ID_REACAO INT NOT NULL,
    
FOREIGN KEY(ID_POSTAGEM) REFERENCES POSTAGEM(ID),
FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID),
FOREIGN KEY(ID_REACAO) REFERENCES REACAO(ID)
);

INSERT INTO POSTAGEM_USUARIO_REACAO(ID_POSTAGEM, ID_USUARIO, ID_REACAO)
	VALUES(1,1,1),(1,2,2),(1,3,1),(1,4,1),
    (2,1,1),(2,2,2),(2,3,1),(2,4,1),
    (3,1,1),(3,2,2),(3,3,1),(3,4,1),
    (4,1,1),(4,2,2),(4,3,1),(4,4,1);
    
    
/**CREATE TABLE POSTAGEM_REACAO(
	ID_POSTAGEM INT NOT NULL,
	ID_RELACAO_REACAO_USUARIO INT NOT NULL,
    
FOREIGN KEY(ID_POSTAGEM) REFERENCES POSTAGEM(ID),
FOREIGN KEY(ID_RELACAO_REACAO_USUARIO) REFERENCES REACAO_USUARIO(ID_RELACAO_REACAO_USUARIO)
);	

INSERT INTO POSTAGEM_REACAO(ID_POSTAGEM, ID_RELACAO_REACAO_USUARIO)
	VALUES(1,1),(1,4),(1,6),(1,7),
    (2,1),(2,4),(2,6),(2,7),
    (3,1),(3,4),(3,6),(3,7),
    (4,1),(4,4),(4,6),(4,7);
**/

CREATE TABLE COMENTARIO(
    ID_POSTAGEM INT NOT NULL,
	ID_USUARIO INT NOT NULL,
	DESCRICAO_MENSAGEM VARCHAR(140) NOT NULL,

FOREIGN KEY (ID_POSTAGEM) REFERENCES POSTAGEM(ID),
FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID)
);

INSERT INTO COMENTARIO(ID_POSTAGEM, ID_USUARIO, DESCRICAO_MENSAGEM)
	VALUE(1, 3, 'Olá Arthur'),
    (1, 4, 'Bom dia Arthur'),
    (1, 1, 'Ninguém liga'),
    (2, 1, 'Olá Jp'),
    (3, 4, 'Olá Nathy'),
    (4, 2, 'Olá Pedro');
